@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   ACCESSIBILITY IMPROVEMENTS
   ======================================== */

/* Screen Reader Only Class */
@layer utilities {
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .not-sr-only {
    position: static;
    width: auto;
    height: auto;
    padding: 0;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}

/* Focus Visible Styles - CRITICAL for Keyboard Navigation */
@layer base {
  /* Remove default outline and add custom focus ring */
  *:focus {
    outline: none;
  }

  /* Custom focus ring for keyboard users only */
  *:focus-visible {
    outline: 2px solid #6366f1; /* indigo-600 */
    outline-offset: 2px;
    border-radius: 0.375rem;
  }

  /* Enhanced focus for buttons */
  button:focus-visible {
    outline: 3px solid #6366f1;
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
  }

  /* Enhanced focus for inputs */
  input:focus-visible,
  textarea:focus-visible {
    outline: 2px solid #6366f1;
    outline-offset: 0;
    ring: 2;
    ring-color: #6366f1;
  }

  /* Animated focus ring (like WebAIM example) */
  @keyframes focusRing {
    0% {
      box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
    }
    50% {
      box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
    }
  }

  button:focus-visible,
  a:focus-visible {
    animation: focusRing 0.6s ease-out;
  }
}

/* Skip Link Styles */
@layer components {
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: #6366f1;
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    border-radius: 0 0 4px 0;
    z-index: 100;
  }

  .skip-link:focus {
    top: 0;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  button,
  input,
  textarea {
    border: 2px solid currentColor;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus-within for parent containers */
@layer utilities {
  .focus-within-ring:focus-within {
    outline: 2px solid #6366f1;
    outline-offset: 2px;
  }
}

/* Ensure sufficient contrast for error messages */
@layer components {
  .error-message {
    background-color: #fef2f2; /* red-50 */
    color: #991b1b; /* red-800 */
    border: 1px solid #fecaca; /* red-200 */
  }
}

/* Live region for screen readers */
@layer utilities {
  .sr-live-region {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }
}